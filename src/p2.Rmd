---
title: "Problema2"
author: "Tales Pimentel"
date: "27-10-2014"
output: html_document
---

Questão 1 - Como está relacionada a alta produção musical de uma tag com sua familiaridade? 
---
--
É interessante para saber se há validade na afirmação de que muita produção concorrente atrapalha a divulgação da musica. Desta forma um grupo de adeptos do Rock, em um cenário onde há muita produção deste estilo, não daria atenção à todas as musicas lançadas, naturalmente, e priorizaria algumas.
--

```{r, echo=FALSE}
#montando data.frames
songs = read.csv("../data/songs.csv")
tags = read.csv("../data/artist_mbtag.csv")
songs_util = songs
songs_util$title = NULL
songs_util$release = NULL
songs_util$artist_name = NULL
songs_util$duration = NULL
songs_util$artist_mbid = NULL
songs_util$artist_hotttnesss = NULL
songs_util = songs_util[songs_util$year != 0,]
row.names(songs_util) = NULL
tags$contador = 1
tags_count = aggregate(contador ~ mbtag, tags, FUN = sum)
tags_count = tags_count[with(tags_count, order(-contador, mbtag)), ]
row.names(tags_count) = NULL

#artists_usa = read.csv("../data/usa_artists.csv")
#songs_usa = songs_util[is.element(songs_util$artist_id, artists_usa$artist_id),]
#row.names(songs_usa) = NULL
#tags_usa = tags[is.element(tags$artist_id, songs_usa$artist_id),]
#row.names(tags_usa) = NULL

#tags_count_usa = aggregate(contador ~ mbtag, tags_usa, FUN = sum)
#tags_count_usa = tags_count_usa[with(tags_count_usa, order(-contador, mbtag)), ]
#row.names(tags_count_usa) = NULL

#population_usa = read.csv("../data/population_eua.csv")

```

Oranizando dados das músicas com tags "pop", "classic pop and rock", "rock and indie", "rock", "british", "american" e "folk" de 1998 até 2002 e de 2003 até 2007
```{r, echo=FALSE}
songs_pop = tags[tags$mbtag == ' pop',]
songs_cl_pop_rock = tags[tags$mbtag == ' classic pop and rock',]
songs_rock_indie = tags[tags$mbtag == ' rock and indie',]
songs_rock = tags[tags$mbtag == ' rock',]
songs_british = tags[tags$mbtag == ' british' | tags$mbtag == ' uk',]
songs_american = tags[tags$mbtag == ' american' | tags$mbtag == ' usa',]
songs_folk = tags[tags$mbtag == ' folk',]

pop_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_pop$artist_id),]
cl_pop_rock_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_cl_pop_rock$artist_id),]
indie_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_rock_indie$artist_id),]
rock_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_rock$artist_id),]
british_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_british$artist_id),]
american_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_american$artist_id),]
folk_95_02 = songs_util[(songs_util$year >= 1998 & songs_util$year <= 2002) & is.element(songs_util$artist_id, songs_folk$artist_id),]

tag_production_fam_95_02 = data.frame("tag" = c("pop", "classic pop and rock", "rock and indie", "rock", "british", "american", "folk"), "production" = c(nrow(pop_95_02), nrow(cl_pop_rock_95_02), nrow(indie_95_02), nrow(rock_95_02), nrow(british_95_02), nrow(american_95_02), nrow(folk_95_02)), "fam_mean" = c(mean(pop_95_02$artist_familiarity), mean(cl_pop_rock_95_02$artist_familiarity), mean(indie_95_02$artist_familiarity), mean(rock_95_02$artist_familiarity), mean(british_95_02$artist_familiarity), mean(american_95_02$artist_familiarity), mean(folk_95_02$artist_familiarity)))

pop_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_pop$artist_id),]
cl_pop_rock_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_cl_pop_rock$artist_id),]
indie_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_rock_indie$artist_id),]
rock_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_rock$artist_id),]
british_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_british$artist_id),]
american_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_american$artist_id),]
folk_03_07 = songs_util[(songs_util$year >= 2003 & songs_util$year <= 2007) & is.element(songs_util$artist_id, songs_folk$artist_id),]

tag_production_fam_03_07 = data.frame("tag" = c("pop", "classic pop and rock", "rock and indie", "rock", "british", "american", "folk"), "production" = c(nrow(pop_03_07), nrow(cl_pop_rock_03_07), nrow(indie_03_07), nrow(rock_03_07), nrow(british_03_07), nrow(american_03_07), nrow(folk_03_07)), "fam_mean" = c(mean(pop_03_07$artist_familiarity), mean(cl_pop_rock_03_07$artist_familiarity), mean(indie_03_07$artist_familiarity), mean(rock_03_07$artist_familiarity), mean(british_03_07$artist_familiarity), mean(american_03_07$artist_familiarity), mean(folk_03_07$artist_familiarity)))



```


```{r}
cor(tag_production_fam_95_02$production, tag_production_fam_95_02$fam_mean, method = "s")
cor(tag_production_fam_03_07$production, tag_production_fam_03_07$fam_mean, method = "s")
```

